---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import { getCollection } from "astro:content";
import "../styles/global.css";

const allPosts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 6);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style is:global>
      @import "../styles/global.css";
    </style>
    <style>
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(40px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .hero-title {
        animation: fadeInUp 0.8s ease-out;
      }
      .hero-subtitle {
        animation: fadeInUp 0.8s ease-out 0.2s backwards;
      }
      .hero-cta {
        animation: fadeInUp 0.8s ease-out 0.4s backwards;
      }
      .blog-card {
        transition: all 0.3s ease;
      }
      .blog-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body class="bg-white">
    <Header />

    <!-- Hero Section -->
    <section
      class="relative overflow-hidden bg-gradient-to-br from-gray-50 to-white"
    >
      <div class="mx-auto max-w-6xl px-4 py-24 sm:px-6 lg:px-8 lg:py-32">
        <div class="grid gap-12 lg:grid-cols-2 lg:gap-8 items-center">
          <div>
            <h1
              class="hero-title text-5xl sm:text-6xl font-bold tracking-tight text-gray-900 leading-tight"
            >
              Building systems at scale
            </h1>
            <p class="hero-subtitle mt-6 text-xl text-gray-600 leading-relaxed">
              Exploring infrastructure, cloud architecture, and distributed
              systems. Sharing lessons learned from building and deploying
              production systems.
            </p>
            <div class="hero-cta mt-8 flex gap-4">
              <a
                href="/about"
                style="background-color: #2563eb; color: white;"
                class="inline-flex items-center px-6 py-3 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg"
                onmouseover="this.style.backgroundColor='#1e40af'"
                onmouseout="this.style.backgroundColor='#2563eb'"
              >
                About Me
                <svg
                  class="ml-2 w-5 h-5"
                  fill="none"
                  stroke="white"
                  viewBox="0 0 24 24"
                  style="color: white;"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
              </a>
              <a
                href="#posts"
                class="inline-flex items-center px-6 py-3 rounded-lg border-2 border-blue-600 text-blue-600 font-medium hover:bg-blue-50 transition-colors"
              >
                Read Articles
              </a>
            </div>
          </div>
          <div class="relative hidden lg:block">
            <div
              class="relative w-full h-96 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl overflow-hidden shadow-xl"
            >
              <div class="absolute inset-0 opacity-20">
                <div
                  class="absolute top-10 right-10 w-40 h-40 bg-blue-400 rounded-full blur-3xl"
                >
                </div>
                <div
                  class="absolute bottom-10 left-10 w-40 h-40 bg-purple-400 rounded-full blur-3xl"
                >
                </div>
              </div>
              <div class="relative h-full flex items-center justify-center">
                <div class="text-6xl">⚡</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Latest Posts Section -->
    <section
      id="posts"
      class="mx-auto max-w-6xl px-4 py-16 sm:px-6 lg:px-8 lg:py-24"
    >
      <div class="mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
          Latest Articles
        </h2>
        <p class="text-xl text-gray-600">
          Deep dives into engineering challenges and solutions
        </p>
      </div>

      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
        {
          allPosts.map((post) => (
            <a
              href={`/blog/${post.id}/`}
              class="blog-card group block h-full rounded-xl border border-gray-200 bg-white p-6 hover:border-blue-300"
            >
              <h3 class="text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-2">
                {post.data.title}
              </h3>
              <p class="text-sm text-gray-600 mb-4 line-clamp-2">
                {post.data.description}
              </p>
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-500">
                  {post.data.pubDate.toLocaleDateString("en-US", {
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                  })}
                </span>
                <span class="text-blue-600 group-hover:translate-x-1 transition-transform">
                  →
                </span>
              </div>
            </a>
          ))
        }
      </div>

      <div class="mt-12 text-center">
        <a
          href="/blog"
          class="inline-flex items-center px-6 py-3 rounded-lg border-2 border-gray-300 text-gray-900 font-medium hover:border-blue-600 hover:text-blue-600 transition-colors"
        >
          View All Articles
          <svg
            class="ml-2 w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </a>
      </div>
    </section>

    <Footer />
  </body>
</html>
